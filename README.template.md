_ЕЛК ЖКХ &#xab;Интер РАО&#xbb;_ для _Home Assistant_
==================================================
<img src="https://raw.githubusercontent.com/alryaz/hass-lkcomu-interrao/master/images/header.png" alt="Логотип интеграции">

> Предоставление информации о текущем состоянии ваших аккаунтов в ЕЛК ЖКХ.
>
>[![hacs_badge](https://img.shields.io/badge/HACS-Custom-orange.svg)](https://github.com/custom-components/hacs)
> [![Лицензия](https://img.shields.io/badge/%D0%9B%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
> [![Поддержка](https://img.shields.io/badge/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F%3F-%D0%B4%D0%B0-green.svg)](https://github.com/alryaz/hass-lkcomu-interrao/graphs/commit-activity)
>
>[![Пожертвование Yandex](https://img.shields.io/badge/%D0%9F%D0%BE%D0%B6%D0%B5%D1%80%D1%82%D0%B2%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-Yandex-red.svg)](https://money.yandex.ru/to/410012369233217)
> [![Пожертвование PayPal](https://img.shields.io/badge/%D0%9F%D0%BE%D0%B6%D0%B5%D1%80%D1%82%D0%B2%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-Paypal-blueviolet.svg)](https://www.paypal.me/alryaz)

## Введение

> @ TODO @

## Установка

### Посредством HACS

> **✔️️ Рекомендуемый метод**

1. Установите
   HACS ([инструкция по установке на оф. сайте](https://hacs.xyz/docs/installation/installation/))
2. Добавьте репозиторий в список дополнительных
3. Найдите `energosbyt` в поиске по интеграциям <sup>1</sup>
4. Установите последнюю версию компонента, нажав на кнопку `Установить` (`Install`)
5. Перезапустите Home Assistant

_<sup>1</sup> При поиске может появиться компонент `Мосэнергосбыт`. Это предшествующая данному
проекту интеграция, и будет в скором времени упразднена._

### Вручную

> **⚠️ Не рекомендуется**

1. Скачайте архив с исходным кодом дополнения
2. Извлеките папку `lkcomu_interrao` из архива в папку `custom_components` внутри папки с
   конфигурацией Home Assistant (создайте её, если она отсутствует)
3. Перезапустите Home Assistant

## Настройка

%%gui_configuration%%

%%yaml_configuration%%

## Доступные объекты

Все объекты гарантируют наличие и полноту следующих атрибутов:

- `account_code: str` - Номер лицевого счёта
- `account_id: int` - Внутренний идентификатор лицевого счёта

### Лицевые счета &mdash; `lkcomu_interrao_account`

> **Домен объектов:** `sensor`

Объект лицевого счёта отображает основную информацию о лицевом счёте, а также его баланс
(положительное значение) или имеющуюся задолженность (отрицательное значение) <sup>1</sup>.

Состояние объекта может принимать следующие значения:

- `unknown` - Информация о состоянии баланса не была предоставлена
- _число_ - Текущее состояние баланса

_<sup>1</sup> ... в том случае, если лицевой счёт предоставляет информацию о балансе_

### Счётчики &mdash; `lkcomu_interrao_meter`

> **Домен объектов:** `sensor`

Объект счётчика отображает информацию о счётчике, а также сведения о последних переданных показаниях
и диапазоне периода передачи показаний<sup>1</sup>.

Состояние объекта может принимать следующие значения:

- `ok` - Текстовое описание состояния отсутствует
- _текст_ - Текстовое описание состояние счётчика (может быть любой длины, и содержать в себе любой
  набор символов, в т.ч. HTML-теги)

Объект гарантирует наличие и полноту следующих атрибутов:

- `meter_code` - Номер счётчика
- `install_date` - Дата установки
- `submit_period_start` - Дата начала периода передачи показаний (в текущем месяце) <sup>1</sup>
- `submit_period_end` - Дата окончания периода передачи показаний (в текущем месяце) <sup>1</sup>
- `submit_period_active` - Флаг активности периода передачи показаний <sup>1</sup>
- `zone_t[N]_name` - Наименование тарифной зоны / тарифа
- `zone_t[N]_last_indication` - Последнее показание по тарифной зоне <sup>2</sup>

Объект гарантирует наличие, но не полноту следующих атрибутов:

- `model` - Модель счётчика
- `last_indications_date` - Дата последней передачи показаний
- `zone_t[N]_description` - Описание тарифной зоны / тарифа
- `zone_t[N]_today_indication` - Значение переданного сегодня показания по тарифной зоне
- `zone_t[N]_invoice_indication` - Значение последнего показания по тарифной зоне, учтённому в
  квитанции
- `zone_t[N]_period_indication` - Значение переданного за период показания по тарифной зоне <sup>
  1</sup>
- `zone_t[N]_invoice_name` - Наименование тарифной зоны, указанное в последней квитанции

_<sup>1</sup> ... в том случае, если счётчик поддерживает передачу показаний_<br>
_<sup>2</sup> При отсутствии фактического значения атрибут примет значение `0.0`_

### Последние платежи &mdash; `lkcomu_interrao_last_payment`

> **Домен объектов:** `binary_sensor`

Объект последнего платежа отображает информацию о последнем зарегистрированном платеже, связанном с
лицевым счётом.

Состояние объекта может принимать следующие значения:

- `on` - Платёж был обработан
- `off` - Платёж ещё не обработан
- `unknown` - Последний платёж не был найден

Объект гарантирует наличие и полноту следующих атрибутов:

- `amount: float` - Сумма платежа
- `paid_at: str` - Дата и время платежа
- `period: str` - Период, за который был выполнен платёж

Объект гарантирует наличие, но не полноту, следующих атрибутов:

- `status: str | None` - Состояние платежа
- `agent: str | None` - Банк, проводящий платёж
- `group: str | None` - Группа платежа (для лицевых счетов с несколькими источниками платежей)

### Последние квитанции &mdash; `lkcomu_interrao_last_invoice`

> **Домен объектов:** `sensor`

> @ TODO @

## Службы

_**N.B.** Подразумевается, что домен служб - `lkcomu_interrao`_

### Лицевые счета

%%service_set_description%%

%%service_get_invoices%%

%%service_get_payments%%

### Счётчики

%%service_push_indications%%

%%service_calculate_indications%%


%%providers_content%%

## Дополнительная информация

> @ TODO @