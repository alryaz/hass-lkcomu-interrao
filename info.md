# –ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç –¥–ª—è HomeAssistant
[![GitHub Page](https://img.shields.io/badge/GitHub-alryaz%2Fhass--mosenergosbyt-blue)](https://github.com/alryaz/hass-mosenergosbyt)
[![Donate Yandex](https://img.shields.io/badge/Donate-Yandex-red.svg)](https://money.yandex.ru/to/410012369233217)
[![Donate PayPal](https://img.shields.io/badge/Donate-Paypal-blueviolet.svg)](https://www.paypal.me/alryaz)
{% set mainline_num_ver = version_available.replace("v", "").replace(".", "") | int %}{%- set features = {
    'v0.2.6': '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö —Å–ª—É–∂–±',
    'v0.2.5': '–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∑–∞ —Å–µ–≥–æ–¥–Ω—è –ø–æ–∫–∞–∑–∞–Ω–∏–π (—Ç–æ–ª—å–∫–æ –ú–≠–°)',
    'v0.2.4': '**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ –ø–æ–∫–∞–∑–∞–Ω–∏—è–º, –∏ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ –ú–≠–°**',
    'v0.2.3': '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ User Agent –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤; —É–ª—É—á—à–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏',
    'v0.2.2': '–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –¢–û "–í–ö–ì–û"; –ø–æ–∫–∞–∑ –¥–∞—Ç –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –ø–µ—Ä–∏–æ–¥–∞ (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö) –¥–ª—è –ú–≠–°',
    'v0.2.0': 'Major architecture overhaul in preparation for new account types support (MES+TKO available already), invoices sensors, progress made towards integrating submissions',
    'v0.1.1': '–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –æ–±—ä–µ–∫—Ç–æ–≤',
    'v0.1.0': '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π; –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"',
}-%}{%- set breaking_changes = namespace(header="Breaking Changes", changes={
    'v0.1.1': ['Account uses `account_code` attribute for its number instead of `number`']
}) -%}{%- set bug_fixes = namespace(header="Bug fixes", changes={
    'v0.2.6': ['–†–∞—Å—à–∏—Ä–µ–Ω—ã —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏–∑ –õ–ö'],
    'v0.2.5': ['–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–∂–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π –∑–∞ —Ç–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥'],
    'v0.2.3': ['Fixed unnecessary error verbosity', 'Fixed `info.md` duplicate headers'],
    'v0.2.2': ['Fixed non-negative value display for MES+TKO accounts'],
    'v0.2.1': ['Fixed reauthentication issue on network failure / server timeout']
}) -%}
{% if installed %}{% if version_installed == "master" %}
#### ‚ö† –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–µ—Ä—Å–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
This branch may be unstable, as it contains commits not tested beforehand.  
Please, do not use this branch in production environments.
{% else %}{% if version_installed == version_available %}
#### ‚úî –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é{% else %}{% set num_ver = version_installed.replace("v", "").replace(".","") | int %}
#### üö® –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à—É—é –≤–µ—Ä—Å–∏—é{% if num_ver < 20 %}
{% for ver, changes in breaking_changes.changes.items() %}{% set ver = ver.replace("v", "").replace(".","") | int %}{% if num_ver < ver %}{% if breaking_changes.header %}
##### {{ breaking_changes.header }} (`{{ version_installed }}` -> `{{ version_available }}`){% set breaking_changes.header = None %}{% endif %}{% for change in changes %}
{{ '- '+change }}{% endfor %}{% endif %}{% endfor %}
{% endif %}{% endif %}

{% for ver, fixes in bug_fixes.changes.items() %}{% set ver = ver.replace("v", "").replace(".","") | int %}{% if num_ver < ver %}{% if bug_fixes.header %}
##### {{ bug_fixes.header }} (`{{ version_installed }}` -> `{{ version_available }}`){% set bug_fixes.header = None %}{% endif %}{% for fix in fixes %}
{{ '- ' + fix }}{% endfor %}{% endif %}{% endfor %}

##### Features{% for ver, text in features.items() %}{% set feature_ver = ver.replace("v", "").replace(".", "") | int %}
- {% if num_ver < feature_ver %}**{% endif %}`{{ ver }}` {% if num_ver < feature_ver %}NEW** {% endif %}{{ text }}{% endfor %}

Please, report all issues to the [project's GitHub issues](https://github.com/alryaz/hass-mosenergosbyt/issues).
{% endif %}{% else %}
## Features{% for ver, text in features.items() %}
- {{ text }} _(supported since `{{ ver }}`)_{% endfor %}
{% endif %}
## –°–∫—Ä–∏–Ω—à–æ—Ç—ã
(–í–æ–∑–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ –ø–µ—Ä–µ–π–¥—è –ø–æ —Å—Å—ã–ª–∫–µ)

[<img alt="–õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç" src="https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/account.png" height="240">](https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/account.png)
[<img alt="–°—á—ë—Ç—á–∏–∫ –ú–≠–°" src="https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/meter.png" height="240">](https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/meter.png)
[<img alt="–°—á—ë—Ç—á–∏–∫ –ú–≠–°+–¢–ö–û" src="https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/meter_tko.png" height="240">](https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/meter_tko.png)
[<img alt="–ö–≤–∏—Ç–∞–Ω—Ü–∏—è" src="https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/invoice.png" height="240">](https://raw.githubusercontent.com/alryaz/hass-mosenergosbyt/master/images/invoice.png)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
### –ü–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º HACS
1. –û—Ç–∫—Ä–æ–π—Ç–µ HACS (—á–µ—Ä–µ–∑ `Extensions` –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏)
1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   1. –í—ã–±–µ—Ä–∏—Ç–µ `Integration` (`–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è`) –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   1. –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `https://github.com/alryaz/hass-mosenergosbyt`
   1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É `Add` (`–î–æ–±–∞–≤–∏—Ç—å`)
   1. –î–æ–∂–¥–∏—Ç–µ—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 10 —Å–µ–∫—É–Ω–¥)
   1. –¢–µ–ø–µ—Ä—å –≤—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é `Mosenergosbyt (–ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç)` –≤ —Å–ø–∏—Å–∫–µ –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É `Install` —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏ `Install`
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ HomeAssistant

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:_ –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤–µ—Ç–∫—É `master`. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. 

### –í—Ä—É—á–Ω—É—é
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ `custom_components` –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–≤–∞—à–µ–≥–æ HomeAssistant (–µ—Å–ª–∏ –æ–Ω–∞ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç). –ó–∞—Ç–µ–º –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –ø–∞–ø–∫—É `mosenergosbyt` –∏–∑ –ø–∞–ø–∫–∏ `custom_components` 
—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –ø–∞–ø–∫—É `custom_components` –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ HomeAssistant.
–ü—Ä–∏–º–µ—Ä (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HomeAssistant –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/mnt/homeassistant/config`) –¥–ª—è Unix-—Å–∏—Å—Ç–µ–º:
```
git clone https://github.com/alryaz/hass-mosenergosbyt.git hass-mosenergosbyt
mkdir -p /mnt/homeassistant/config/custom_components
mv hass-mosenergosbyt/custom_components/mosenergosbyt /mnt/homeassistant/config/custom_components
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
### –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å HomeAssistant
1. –û—Ç–∫—Ä–æ–π—Ç–µ `–ù–∞—Å—Ç—Ä–æ–π–∫–∏` -> `–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏`
1. –ù–∞–∂–º–∏—Ç–µ –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–æ–ø–∫—É —Å –ø–ª—é—Å–æ–º
1. –í–≤–µ–¥–∏—Ç–µ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ `Mosenergosbyt` –∏–ª–∏ `–ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç`
   1. –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ HomeAssistant –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ
        —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
1. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–ª—è –õ–ö _"–ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç"_
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`
1. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –Ω–∞—á–Ω—ë—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ; –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ
   –æ–±—ä–µ–∫—Ç–æ–≤, —á—å–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–∞ `MES`.

### –ß–µ—Ä–µ–∑ `configuration.yaml`
#### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –õ–ö –ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç.  
`username` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω / –∞–¥—Ä–µ—Å —ç–ª. –ø–æ—á—Ç—ã)  
`password` - –ü–∞—Ä–æ–ª—å
```yaml
mosenergosbyt:
  username: !secret mosenergosbyt_username
  password: !secret mosenergosbyt_password
```

#### –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
–î–ª—è —ç—Ç–æ–≥–æ –≤–≤–æ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ:
```yaml
mosenergosbyt:
    # First account
  - username: !secret first_mosenergosbyt_username
    password: !secret first_mosenergosbyt_password

    # Second account
  - username: !secret second_mosenergosbyt_username
    password: !secret second_mosenergosbyt_password

    # Third account
  - username: !secret third_mosenergosbyt_username
    password: !secret third_mosenergosbyt_password 
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
##### **–í–∞—Ä–∏–∞–Ω—Ç –ê:** –£–∫–∞–∂–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤:
```yaml
mosenergosbyt:
  ...
  # –°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
  accounts: ['99999-999-99', '88888-888-88']
```
##### **–í–∞—Ä–∏–∞–Ω—Ç –ë:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—á—ë—Ç—á–∏–∫–∏:
```yaml
mosenergosbyt:
  ...
  accounts:
    # –ù–æ–º–µ—Ä –õ–° -> –ù–æ–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞
    99999-999-99: 123456789
    88888-888-88: ['321987654', '456789123']
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (`scan_interval`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —á–∞—Å  
–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`login_timeout`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —á–∞—Å
```yaml
mosenergosbyt:
  ...
  # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  scan_interval:
    hours: 6
    seconds: 3
    minutes: 1
    ...

  # ... —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–µ–∫—É–Ω–¥–∞–º–∏
  scan_interval: 21600

  # –°–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å–µ—Å—Å–∏—é –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  # –°–µ—Å—Å–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –õ–°
  login_timeout:
    hours: 3
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π
–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏. –û–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏, –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã–µ
–∫–æ–º–ø–∞–Ω–∏–µ–π. **–¢–æ, —á—Ç–æ —É–∂–µ –±—ã–ª–æ —É–ø–ª–∞—á–µ–Ω–æ, –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è!** –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞ —Ü–µ–Ω.
```yaml
mosenergosbyt:
  ...
  # –í–∫–ª—é—á–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
  invoices: true

  # –í–∫–ª—é—á–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
  invoices: ['1131241222']

  # –û—Ç–∫–ª—é—á–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
  invoices: false
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–º—ë–Ω –æ–±—ä–µ–∫—Ç–æ–≤
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ `str.format(...)` —è–∑—ã–∫–∞ Python. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö
–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ ID —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∏—Ö –∏–º–µ–Ω–∞.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–∞–º–µ–Ω—ã: `code`

–§–æ—Ä–º–∞—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ (`account_name`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `MES Account {code}`  
–§–æ—Ä–º–∞—Ç —Å—á—ë—Ç—á–∏–∫–∞ (`meter_name`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `MES Meter {code}`  
–§–æ—Ä–º–∞—Ç –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ (`invoice_name`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `MES Invoice {code}`
```yaml
mosenergosbyt:
  ...
  # –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
  account_name: '–ú–æ–π —Å—É–ø–µ—Ä {code} –ª–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç' 

  # –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤
  meter_name: '–°—á—ë—Ç—á–∏–∫ {code} –∂–∞—Ö–∞–µ—Ç'

  # –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∫–≤–∏—Ç–∞–Ω—Ü–∏–π
  meter_name: '–ó–∞ {code} –ø–ª–∞—Ç–∏–º –º–Ω–æ–≥–æ!'
```

####<a name="calculate_indications"></a> –ü–æ–¥—Å—á—ë—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –¥–æ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–∫–∞–∑–∞–Ω–∏–π
> –¢–æ–ª—å–∫–æ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤ –ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–ª—É–∂–±—É `mosenergosbyt.calculate_indications` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
- `entity_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–Ω—Å–æ—Ä–∞ —Å—á—ë—Ç—á–∏–∫–∞ (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `meter_code`)
- `meter_code`: –ù–æ–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞ (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `entity_id`)
- `indications`: –°–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ –ø–æ–∫–∞–∑–∞–Ω–∏—è–º (—Å–ø–∏—Å–æ–∫ –¥–ª–∏–Ω–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ —Ü–µ–ª–µ–≤–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞ –∏–∑ —Ü–µ–ª—ã—Ö
   –∏–ª–∏ –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª)
- `ignore_period`: –ù–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false` - —É—á–∏—Ç—ã–≤–∞—Ç—å)
- `incremental`: –ü—Ä–∏–±–∞–≤–ª—è—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö <sup>1</sup>

–∫–æ—Ç–æ—Ä–∞—è –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –æ—Ç—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `mosenergosbyt_calculation_result`, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
- `entity_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–Ω—Å–æ—Ä–∞ —Å—á—ë—Ç—á–∏–∫–∞
- `meter_code`: –ù–æ–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞
- `indications`: –ù–æ—Ä–º–∞–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π<sup>2</sup> —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- `period`: –ü–µ—Ä–∏–æ–¥ (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞—á–∞–ª–æ –º–µ—Å—è—Ü–∞ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ)
- `charged`: –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (—Å –¥–µ—Å—è—Ç–∏—á–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏)
- `indications_dict`: –ò–º–µ–Ω–æ–≤–∞–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤ —Ñ–æ–º–∞—Ç–µ `t<—á–∏—Å–ª–æ>` -> `<–ø–æ–∫–∞–∑–∞–Ω–∏–µ>`
- `comment`: –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —Å–æ–æ–±—â–∞–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º –õ–ö

<sup>1</sup> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è —Ç–µ, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥ `submitted_value_t[1,2,3]`  
<sup>2</sup> –ë—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –ø—Ä–∏–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π

–î–∞–Ω–Ω–∞—è —Å–ª—É–∂–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å—Ä–æ–∫–∞ –∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–∫–∞–∑–∞–Ω–∏–π. –ü—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å, _**–û–î–ù–ê–ö–û –î–ï–õ–ê–¢–¨ –≠–¢–û –ù–ê–°–¢–û–Ø–¢–ï–õ–¨–ù–û –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**_ –≤ —Å–≤—è–∑–∏
—Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏.

–ù–∏–∂–µ —É–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ —Å–ª—É–∂–±—ã:
{% raw %}
```yaml
service: mosenergosbyt.calculate_indications
data_template:
  entity_id: sensor.mes_meter_123456789
  indications:
    - "{{ states('sensor.monthly_consumption_peak') + state_attr('sensor.mes_meter_123456789', 'last_value_t1') }}"
    - "{{ states('sensor.monthly_consumption_offpeak') + state_attr('sensor.mes_meter_123456789', 'last_value_t2') }}"
    - "{{ states('sensor.monthly_consumption_halfpeak') + state_attr('sensor.mes_meter_123456789', 'last_value_t3') }}"
```
{% endraw %}

–ù–∏–∂–µ —É–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –¥–∞–Ω–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:
{% raw %}
```yaml
automation:
  - id: respond_to_calculation
    trigger:
      platform: event
      event_type: calculation_result
    action:
      service: persistent_notification.create
      data_template:
        title: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥—Å—á—ë—Ç–æ–≤"
        message: >
          –î–ª—è —Å—á—ë—Ç—á–∏–∫–∞ {{ state_attr(trigger.event.data['entity_id'], 'meter_code') }}
          –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–¥—Å—á—ë—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥ {{ trigger.event.data['period'] }};
          –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–æ {{ trigger.event.data['charged'] }}
```
{% endraw %}

#### –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π
> –¢–æ–ª—å–∫–æ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤ –ú–æ—Å—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–ª—É–∂–±—É `mosenergosbyt.push_indications` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
- `entity_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–Ω—Å–æ—Ä–∞ —Å—á—ë—Ç—á–∏–∫–∞ (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `meter_code`)
- `meter_code`: –ù–æ–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞ (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `entity_id`)
- `indications`: –°–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ –ø–æ–∫–∞–∑–∞–Ω–∏—è–º (—Å–ø–∏—Å–æ–∫ –¥–ª–∏–Ω–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ —Ü–µ–ª–µ–≤–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞ –∏–∑ —Ü–µ–ª—ã—Ö
   –∏–ª–∏ –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª)
- `ignore_period`: –ù–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false` - —É—á–∏—Ç—ã–≤–∞—Ç—å)
- `incremental`: –ü—Ä–∏–±–∞–≤–ª—è—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö <sup>3</sup>

–∫–æ—Ç–æ—Ä–∞—è –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –æ—Ç—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `mosenergosbyt_push_result`, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
- `entity_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–Ω—Å–æ—Ä–∞ —Å—á—ë—Ç—á–∏–∫–∞
- `meter_code`: –ù–æ–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–∞
- `indications`: –ù–æ—Ä–º–∞–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π<sup>4</sup> —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- `comment`: –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —Å–æ–æ–±—â–∞–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º –õ–ö

<sup>3</sup> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è —Ç–µ, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥ `submitted_value_t[1,2,3]`  
<sup>4</sup> –ë—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –ø—Ä–∏–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π

–î–∞–Ω–Ω–∞—è —Å–ª—É–∂–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å—Ä–æ–∫–∞ –∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–∫–∞–∑–∞–Ω–∏–π. –ü—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å, _**–û–î–ù–ê–ö–û –î–ï–õ–ê–¢–¨ –≠–¢–û –ù–ê–°–¢–û–Ø–¢–ï–õ–¨–ù–û –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**_ –≤ —Å–≤—è–∑–∏
—Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏. –ü—Ä–∏–º–µ—Ä —Ç–∞–∫–∏—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π: –≤–Ω–µ–æ—á–µ—Ä–µ–¥–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏,
—Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –≤ —Å–µ–±–µ –¥–≤–æ–π–Ω—É—é –ø–ª–∞—Ç—É.

–í—ã–∑–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏ –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ [–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞](#calculate_indications).

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ "–±—Ä–∞—É–∑–µ—Ä–∞" (UA) –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–¥—É–ª—å `fake_useragent` ([—Å—Å—ã–ª–∫–∞](https://pypi.org/project/fake-useragent/)) –ø—Ä–æ–±—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å
—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ `User-Agent` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ä–∞–±–æ—Ç—ã —Å API.
–ï—Å–ª–∏ –∂–µ–ª–∞–µ–º–æ —É–∫–∞–∑–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞, —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ:
```yaml
mosenergosbyt:
  ...
  # –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π User-Agent
  user_agent: 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Chrome/22.0.1216.0 Safari/537.2'
  
  # –¢–æ—Ç –∂–µ —Å–∞–º—ã–π User-Agent, –Ω–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫
  user_agent: >
    Mozilla/5.0 (Windows NT 6.1)
    AppleWebKit/537.2 (KHTML, like Gecko)
    Chrome/22.0.1216.0
    Safari/537.2
